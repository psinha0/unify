{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sinha\\\\Desktop\\\\Computing Projects\\\\INFS3059\\\\friend-finder\\\\client\\\\src\\\\components\\\\Discovery\\\\SwipeDiscovery.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../../hooks/useAuth';\nimport axios from 'axios';\nimport './SwipeDiscovery.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SwipeDiscovery = () => {\n  _s();\n  var _currentFriend$intere;\n  const {\n    user\n  } = useAuth();\n  const [potentialFriends, setPotentialFriends] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [swipeHistory, setSwipeHistory] = useState([]);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [expandedBio, setExpandedBio] = useState(false);\n  const [showConnectionDetails, setShowConnectionDetails] = useState(false);\n  const [imageOffset, setImageOffset] = useState(0);\n  const cardRef = React.useRef(null);\n  useEffect(() => {\n    fetchPotentialFriends();\n  }, []);\n\n  // Parallax effect on card scroll - using ref\n  const handleCardScroll = useCallback(e => {\n    const scrollTop = e.target.scrollTop;\n    // Move image at 50% speed of scroll for parallax effect\n    const offset = scrollTop * 0.5;\n    setImageOffset(offset);\n  }, []);\n  const fetchPotentialFriends = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      const response = await axios.get('http://localhost:5000/api/matching/potential-friends', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setPotentialFriends(response.data);\n    } catch (error) {\n      console.error('Error fetching potential friends:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSwipe = useCallback(async (direction, friend) => {\n    if (isAnimating) return;\n    setIsAnimating(true);\n\n    // Record the swipe for preference learning\n    const swipeData = {\n      targetUserId: friend._id,\n      action: direction,\n      // 'like' or 'pass'\n      matchScore: friend.matchScore,\n      matchFactors: friend.matchFactors,\n      timestamp: new Date().toISOString()\n    };\n    setSwipeHistory(prev => [...prev, swipeData]);\n    try {\n      // Send swipe data to backend for preference learning\n      const token = localStorage.getItem('token');\n      await axios.post('http://localhost:5000/api/matching/record-swipe', swipeData, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      // If it's a like, send friend request\n      if (direction === 'like') {\n        await axios.post('http://localhost:5000/api/matching/friend-request', {\n          friendId: friend._id\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error recording swipe:', error);\n    }\n\n    // Move to next card\n    setTimeout(() => {\n      setCurrentIndex(prev => prev + 1);\n      setIsAnimating(false);\n      // Reset UI states for next card\n      setExpandedBio(false);\n      setShowConnectionDetails(false);\n      setImageOffset(0); // Reset parallax offset\n      // Reset scroll position\n      if (cardRef.current) {\n        cardRef.current.scrollTop = 0;\n      }\n    }, 300);\n  }, [isAnimating]);\n  const currentFriend = potentialFriends[currentIndex];\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"swipe-discovery\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Finding amazing people for you...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this);\n  }\n  if (!currentFriend) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"swipe-discovery\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-more-cards\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83C\\uDF89 You've seen everyone!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Check back later for new potential friends, or expand your preferences.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchPotentialFriends,\n          className: \"refresh-btn\",\n          children: \"Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this);\n  }\n\n  // Generate quick match summary for image overlay (Tinder-style)\n  const getQuickMatchSummary = (friend, factors) => {\n    var _factors$sharedIntere, _factors$sharedIntere2, _friend$socialPrefere, _friend$socialPrefere2, _user$socialPreferenc;\n    if (!factors || !friend) return 'Great potential match!';\n    const summaries = [];\n\n    // Check for shared interests\n    if (((_factors$sharedIntere = factors.sharedInterests) === null || _factors$sharedIntere === void 0 ? void 0 : _factors$sharedIntere.length) >= 3) {\n      summaries.push(`${factors.sharedInterests.length} shared interests`);\n    } else if (((_factors$sharedIntere2 = factors.sharedInterests) === null || _factors$sharedIntere2 === void 0 ? void 0 : _factors$sharedIntere2.length) > 0) {\n      summaries.push(`Loves ${factors.sharedInterests[0]}`);\n    }\n\n    // Check communication style\n    if (factors.communicationMatch && (_friend$socialPrefere = friend.socialPreferences) !== null && _friend$socialPrefere !== void 0 && _friend$socialPrefere.communicationStyle) {\n      summaries.push('Similar communication style');\n    }\n\n    // Check social energy compatibility\n    if ((_friend$socialPrefere2 = friend.socialPreferences) !== null && _friend$socialPrefere2 !== void 0 && _friend$socialPrefere2.socialEnergy && (_user$socialPreferenc = user.socialPreferences) !== null && _user$socialPreferenc !== void 0 && _user$socialPreferenc.socialEnergy) {\n      if (friend.socialPreferences.socialEnergy === user.socialPreferences.socialEnergy) {\n        summaries.push(`Both ${friend.socialPreferences.socialEnergy.toLowerCase()}s`);\n      }\n    }\n\n    // Check location proximity\n    if (factors.proximityScore > 0.7 && friend.location) {\n      summaries.push(`Lives in ${friend.location}`);\n    }\n\n    // Return a concise summary (max 2 items joined by bullet)\n    if (summaries.length === 0) {\n      return 'Exciting potential connection!';\n    }\n    return summaries.slice(0, 2).join(' • ');\n  };\n  const getDetailedConnectionReasons = (friend, factors) => {\n    var _factors$sharedIntere3, _friend$socialPrefere4, _user$socialPreferenc2, _factors$sharedWeeken, _factors$sharedValues, _friend$socialPrefere5, _friend$socialPrefere6, _user$socialPreferenc3, _user$socialPreferenc4, _friend$lifestyle2, _user$lifestyle;\n    if (!factors || typeof factors !== 'object') {\n      return [];\n    }\n    const reasons = [];\n\n    // Shared interests with specifics\n    if (((_factors$sharedIntere3 = factors.sharedInterests) === null || _factors$sharedIntere3 === void 0 ? void 0 : _factors$sharedIntere3.length) > 0) {\n      const interestList = factors.sharedInterests.slice(0, 4).join(', ');\n      const remaining = factors.sharedInterests.length > 4 ? ` and ${factors.sharedInterests.length - 4} more` : '';\n      reasons.push({\n        icon: '🎯',\n        title: 'Shared Interests',\n        detail: `You both enjoy: ${interestList}${remaining}`,\n        strength: 'high'\n      });\n    }\n\n    // Communication style match\n    if (factors.communicationMatch) {\n      var _friend$socialPrefere3;\n      const style = ((_friend$socialPrefere3 = friend.socialPreferences) === null || _friend$socialPrefere3 === void 0 ? void 0 : _friend$socialPrefere3.communicationStyle) || 'similar ways';\n      reasons.push({\n        icon: '💬',\n        title: 'Communication Compatibility',\n        detail: `You both prefer ${style.toLowerCase()} - making conversations flow naturally`,\n        strength: 'high'\n      });\n    }\n\n    // Activity level compatibility\n    if (factors.activityLevelMatch) {\n      var _friend$lifestyle;\n      const level = ((_friend$lifestyle = friend.lifestyle) === null || _friend$lifestyle === void 0 ? void 0 : _friend$lifestyle.activityLevel) || 'similar activity levels';\n      reasons.push({\n        icon: '⚡',\n        title: 'Activity Level Match',\n        detail: `Both ${level.toLowerCase()} - perfect for planning activities together`,\n        strength: 'medium'\n      });\n    }\n\n    // Social energy compatibility\n    if ((_friend$socialPrefere4 = friend.socialPreferences) !== null && _friend$socialPrefere4 !== void 0 && _friend$socialPrefere4.socialEnergy && (_user$socialPreferenc2 = user.socialPreferences) !== null && _user$socialPreferenc2 !== void 0 && _user$socialPreferenc2.socialEnergy) {\n      if (friend.socialPreferences.socialEnergy === user.socialPreferences.socialEnergy) {\n        const energy = friend.socialPreferences.socialEnergy;\n        reasons.push({\n          icon: '🌟',\n          title: 'Social Energy Match',\n          detail: `You're both ${energy.toLowerCase()}s - you'll understand each other's social needs`,\n          strength: 'high'\n        });\n      }\n    }\n\n    // Weekend plans alignment\n    if (((_factors$sharedWeeken = factors.sharedWeekendPlans) === null || _factors$sharedWeeken === void 0 ? void 0 : _factors$sharedWeeken.length) > 0) {\n      const plans = factors.sharedWeekendPlans.join(', ');\n      reasons.push({\n        icon: '🎉',\n        title: 'Weekend Vibes Align',\n        detail: `You both love: ${plans}`,\n        strength: 'medium'\n      });\n    }\n\n    // Shared values\n    if (((_factors$sharedValues = factors.sharedValues) === null || _factors$sharedValues === void 0 ? void 0 : _factors$sharedValues.length) > 0) {\n      const values = factors.sharedValues.slice(0, 3).join(', ');\n      reasons.push({\n        icon: '💎',\n        title: 'Core Values Match',\n        detail: `You both value: ${values}`,\n        strength: 'high'\n      });\n    }\n\n    // Personality compatibility\n    if (factors.personalityMatch && factors.personalityMatch > 0.6) {\n      const percentage = Math.round(factors.personalityMatch * 100);\n      reasons.push({\n        icon: '🧠',\n        title: 'Personality Compatibility',\n        detail: `${percentage}% personality alignment based on your traits and preferences`,\n        strength: 'medium'\n      });\n    }\n\n    // Location proximity\n    if (factors.proximityScore > 0.7 && friend.location) {\n      reasons.push({\n        icon: '📍',\n        title: 'Location Convenient',\n        detail: `You're both in ${friend.location} - easy to meet up!`,\n        strength: 'medium'\n      });\n    }\n\n    // Friendship type compatibility\n    if (((_friend$socialPrefere5 = friend.socialPreferences) === null || _friend$socialPrefere5 === void 0 ? void 0 : (_friend$socialPrefere6 = _friend$socialPrefere5.friendshipType) === null || _friend$socialPrefere6 === void 0 ? void 0 : _friend$socialPrefere6.length) > 0 && ((_user$socialPreferenc3 = user.socialPreferences) === null || _user$socialPreferenc3 === void 0 ? void 0 : (_user$socialPreferenc4 = _user$socialPreferenc3.friendshipType) === null || _user$socialPreferenc4 === void 0 ? void 0 : _user$socialPreferenc4.length) > 0) {\n      const commonTypes = friend.socialPreferences.friendshipType.filter(type => user.socialPreferences.friendshipType.includes(type));\n      if (commonTypes.length > 0) {\n        reasons.push({\n          icon: '🤝',\n          title: 'Friendship Style Match',\n          detail: `You both seek: ${commonTypes.join(', ')}`,\n          strength: 'high'\n        });\n      }\n    }\n\n    // Schedule compatibility\n    if (((_friend$lifestyle2 = friend.lifestyle) === null || _friend$lifestyle2 === void 0 ? void 0 : _friend$lifestyle2.schedule) === ((_user$lifestyle = user.lifestyle) === null || _user$lifestyle === void 0 ? void 0 : _user$lifestyle.schedule)) {\n      const schedule = friend.lifestyle.schedule;\n      reasons.push({\n        icon: '⏰',\n        title: 'Schedule Compatibility',\n        detail: `You're both ${schedule.toLowerCase()}s - easier to sync hangout times`,\n        strength: 'low'\n      });\n    }\n    return reasons;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"swipe-discovery\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"swipe-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Discover Friends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"match-count\",\n        children: [potentialFriends.length - currentIndex, \" people to discover\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `friend-card ${isAnimating ? 'animating' : ''}`,\n        ref: cardRef => {\n          if (cardRef) {\n            cardRef.scrollTop = 0; // Reset scroll when card changes\n            setImageOffset(0); // Reset parallax offset\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-image\",\n          style: {\n            backgroundImage: `url(${currentFriend.profilePicture || '/default-avatar.png'})`,\n            transform: `translateY(${imageOffset}px)` // Parallax transform\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"match-score\",\n            children: [currentFriend.matchScore, \"% match\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-image-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: currentFriend.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"match-reason\",\n              children: getQuickMatchSummary(currentFriend, currentFriend.matchFactors)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"see-bio-btn\",\n            onClick: e => {\n              // Find the friend-card div (the scrollable container)\n              const friendCard = e.target.closest('.friend-card');\n              const cardImage = friendCard === null || friendCard === void 0 ? void 0 : friendCard.querySelector('.card-image');\n              if (friendCard && cardImage) {\n                // Get the actual height of the image container\n                const imageHeight = cardImage.offsetHeight;\n                // Scroll the entire card down by the image height minus some offset\n                // This creates a smooth parallax effect\n                friendCard.scrollTo({\n                  top: imageHeight - 80,\n                  behavior: 'smooth'\n                });\n              }\n            },\n            children: \"See Full Profile \\u2193\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `card-content ${expandedBio ? 'expanded' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: currentFriend.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"location\",\n                children: [\"\\uD83D\\uDCCD \", currentFriend.location || 'Location not set']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `bio ${expandedBio ? 'expanded' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"About:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: currentFriend.bio || 'No bio available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"interests\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Interests:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"interest-tags\",\n              children: (_currentFriend$intere = currentFriend.interests) === null || _currentFriend$intere === void 0 ? void 0 : _currentFriend$intere.map((interest, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"interest-tag\",\n                children: interest\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"match-factors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"match-factors-header\",\n              onClick: () => setShowConnectionDetails(!showConnectionDetails),\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\uD83C\\uDF1F Why you might connect\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"expand-icon\",\n                children: showConnectionDetails ? '▼' : '▶'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 29\n            }, this), !showConnectionDetails ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"match-factors-summary\",\n              children: [getDetailedConnectionReasons(currentFriend, currentFriend.matchFactors).slice(0, 2).map((reason, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"reason-summary\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"reason-icon\",\n                  children: reason.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"reason-title\",\n                  children: reason.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 49\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 45\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"show-more-btn\",\n                onClick: e => {\n                  e.stopPropagation();\n                  setShowConnectionDetails(true);\n                },\n                children: \"Show all reasons\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"match-factors-detailed\",\n              children: getDetailedConnectionReasons(currentFriend, currentFriend.matchFactors).map((reason, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `reason-card strength-${reason.strength}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"reason-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"reason-icon\",\n                    children: reason.icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"reason-title\",\n                    children: reason.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"reason-detail\",\n                  children: reason.detail\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 45\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"swipe-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"swipe-btn pass\",\n        onClick: () => handleSwipe('pass', currentFriend),\n        disabled: isAnimating,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn-icon\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 21\n        }, this), \"Pass\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"swipe-btn like\",\n        onClick: () => handleSwipe('like', currentFriend),\n        disabled: isAnimating,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn-icon\",\n          children: \"\\uD83D\\uDC99\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 21\n        }, this), \"Connect\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"swipe-instructions\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDCA1 Swipe or click to make choices. We'll learn your preferences to find better matches!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 9\n  }, this);\n};\n_s(SwipeDiscovery, \"R13eSzB8oE/ByGNEFOETZB1kQLY=\", false, function () {\n  return [useAuth];\n});\n_c = SwipeDiscovery;\nexport default SwipeDiscovery;\nvar _c;\n$RefreshReg$(_c, \"SwipeDiscovery\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useAuth","axios","jsxDEV","_jsxDEV","SwipeDiscovery","_s","_currentFriend$intere","user","potentialFriends","setPotentialFriends","currentIndex","setCurrentIndex","loading","setLoading","swipeHistory","setSwipeHistory","isAnimating","setIsAnimating","expandedBio","setExpandedBio","showConnectionDetails","setShowConnectionDetails","imageOffset","setImageOffset","cardRef","useRef","fetchPotentialFriends","handleCardScroll","e","scrollTop","target","offset","token","localStorage","getItem","response","get","headers","data","error","console","handleSwipe","direction","friend","swipeData","targetUserId","_id","action","matchScore","matchFactors","timestamp","Date","toISOString","prev","post","friendId","setTimeout","current","currentFriend","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","getQuickMatchSummary","factors","_factors$sharedIntere","_factors$sharedIntere2","_friend$socialPrefere","_friend$socialPrefere2","_user$socialPreferenc","summaries","sharedInterests","length","push","communicationMatch","socialPreferences","communicationStyle","socialEnergy","toLowerCase","proximityScore","location","slice","join","getDetailedConnectionReasons","_factors$sharedIntere3","_friend$socialPrefere4","_user$socialPreferenc2","_factors$sharedWeeken","_factors$sharedValues","_friend$socialPrefere5","_friend$socialPrefere6","_user$socialPreferenc3","_user$socialPreferenc4","_friend$lifestyle2","_user$lifestyle","reasons","interestList","remaining","icon","title","detail","strength","_friend$socialPrefere3","style","activityLevelMatch","_friend$lifestyle","level","lifestyle","activityLevel","energy","sharedWeekendPlans","plans","sharedValues","values","personalityMatch","percentage","Math","round","friendshipType","commonTypes","filter","type","includes","schedule","ref","backgroundImage","profilePicture","transform","username","friendCard","closest","cardImage","querySelector","imageHeight","offsetHeight","scrollTo","top","behavior","bio","interests","map","interest","index","reason","stopPropagation","disabled","_c","$RefreshReg$"],"sources":["C:/Users/sinha/Desktop/Computing Projects/INFS3059/friend-finder/client/src/components/Discovery/SwipeDiscovery.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useAuth } from '../../hooks/useAuth';\r\nimport axios from 'axios';\r\nimport './SwipeDiscovery.css';\r\n\r\nconst SwipeDiscovery = () => {\r\n    const { user } = useAuth();\r\n    const [potentialFriends, setPotentialFriends] = useState([]);\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [loading, setLoading] = useState(true);\r\n    const [swipeHistory, setSwipeHistory] = useState([]);\r\n    const [isAnimating, setIsAnimating] = useState(false);\r\n    const [expandedBio, setExpandedBio] = useState(false);\r\n    const [showConnectionDetails, setShowConnectionDetails] = useState(false);\r\n    const [imageOffset, setImageOffset] = useState(0);\r\n    const cardRef = React.useRef(null);\r\n\r\n    useEffect(() => {\r\n        fetchPotentialFriends();\r\n    }, []);\r\n\r\n    // Parallax effect on card scroll - using ref\r\n    const handleCardScroll = useCallback((e) => {\r\n        const scrollTop = e.target.scrollTop;\r\n        // Move image at 50% speed of scroll for parallax effect\r\n        const offset = scrollTop * 0.5;\r\n        setImageOffset(offset);\r\n    }, []);\r\n\r\n    const fetchPotentialFriends = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get('http://localhost:5000/api/matching/potential-friends', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            setPotentialFriends(response.data);\r\n        } catch (error) {\r\n            console.error('Error fetching potential friends:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSwipe = useCallback(async (direction, friend) => {\r\n        if (isAnimating) return;\r\n        \r\n        setIsAnimating(true);\r\n        \r\n        // Record the swipe for preference learning\r\n        const swipeData = {\r\n            targetUserId: friend._id,\r\n            action: direction, // 'like' or 'pass'\r\n            matchScore: friend.matchScore,\r\n            matchFactors: friend.matchFactors,\r\n            timestamp: new Date().toISOString()\r\n        };\r\n        \r\n        setSwipeHistory(prev => [...prev, swipeData]);\r\n        \r\n        try {\r\n            // Send swipe data to backend for preference learning\r\n            const token = localStorage.getItem('token');\r\n            await axios.post('http://localhost:5000/api/matching/record-swipe', swipeData, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`\r\n                }\r\n            });\r\n            \r\n            // If it's a like, send friend request\r\n            if (direction === 'like') {\r\n                await axios.post('http://localhost:5000/api/matching/friend-request', {\r\n                    friendId: friend._id\r\n                }, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`\r\n                    }\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error recording swipe:', error);\r\n        }\r\n        \r\n        // Move to next card\r\n        setTimeout(() => {\r\n            setCurrentIndex(prev => prev + 1);\r\n            setIsAnimating(false);\r\n            // Reset UI states for next card\r\n            setExpandedBio(false);\r\n            setShowConnectionDetails(false);\r\n            setImageOffset(0); // Reset parallax offset\r\n            // Reset scroll position\r\n            if (cardRef.current) {\r\n                cardRef.current.scrollTop = 0;\r\n            }\r\n        }, 300);\r\n    }, [isAnimating]);\r\n\r\n    const currentFriend = potentialFriends[currentIndex];\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"swipe-discovery\">\r\n                <div className=\"loading-container\">\r\n                    <div className=\"loading-spinner\"></div>\r\n                    <p>Finding amazing people for you...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!currentFriend) {\r\n        return (\r\n            <div className=\"swipe-discovery\">\r\n                <div className=\"no-more-cards\">\r\n                    <h3>🎉 You've seen everyone!</h3>\r\n                    <p>Check back later for new potential friends, or expand your preferences.</p>\r\n                    <button onClick={fetchPotentialFriends} className=\"refresh-btn\">\r\n                        Refresh\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Generate quick match summary for image overlay (Tinder-style)\r\n    const getQuickMatchSummary = (friend, factors) => {\r\n        if (!factors || !friend) return 'Great potential match!';\r\n        \r\n        const summaries = [];\r\n        \r\n        // Check for shared interests\r\n        if (factors.sharedInterests?.length >= 3) {\r\n            summaries.push(`${factors.sharedInterests.length} shared interests`);\r\n        } else if (factors.sharedInterests?.length > 0) {\r\n            summaries.push(`Loves ${factors.sharedInterests[0]}`);\r\n        }\r\n        \r\n        // Check communication style\r\n        if (factors.communicationMatch && friend.socialPreferences?.communicationStyle) {\r\n            summaries.push('Similar communication style');\r\n        }\r\n        \r\n        // Check social energy compatibility\r\n        if (friend.socialPreferences?.socialEnergy && user.socialPreferences?.socialEnergy) {\r\n            if (friend.socialPreferences.socialEnergy === user.socialPreferences.socialEnergy) {\r\n                summaries.push(`Both ${friend.socialPreferences.socialEnergy.toLowerCase()}s`);\r\n            }\r\n        }\r\n        \r\n        // Check location proximity\r\n        if (factors.proximityScore > 0.7 && friend.location) {\r\n            summaries.push(`Lives in ${friend.location}`);\r\n        }\r\n        \r\n        // Return a concise summary (max 2 items joined by bullet)\r\n        if (summaries.length === 0) {\r\n            return 'Exciting potential connection!';\r\n        }\r\n        \r\n        return summaries.slice(0, 2).join(' • ');\r\n    };\r\n\r\n    const getDetailedConnectionReasons = (friend, factors) => {\r\n        if (!factors || typeof factors !== 'object') {\r\n            return [];\r\n        }\r\n        \r\n        const reasons = [];\r\n        \r\n        // Shared interests with specifics\r\n        if (factors.sharedInterests?.length > 0) {\r\n            const interestList = factors.sharedInterests.slice(0, 4).join(', ');\r\n            const remaining = factors.sharedInterests.length > 4 ? ` and ${factors.sharedInterests.length - 4} more` : '';\r\n            reasons.push({\r\n                icon: '🎯',\r\n                title: 'Shared Interests',\r\n                detail: `You both enjoy: ${interestList}${remaining}`,\r\n                strength: 'high'\r\n            });\r\n        }\r\n        \r\n        // Communication style match\r\n        if (factors.communicationMatch) {\r\n            const style = friend.socialPreferences?.communicationStyle || 'similar ways';\r\n            reasons.push({\r\n                icon: '💬',\r\n                title: 'Communication Compatibility',\r\n                detail: `You both prefer ${style.toLowerCase()} - making conversations flow naturally`,\r\n                strength: 'high'\r\n            });\r\n        }\r\n        \r\n        // Activity level compatibility\r\n        if (factors.activityLevelMatch) {\r\n            const level = friend.lifestyle?.activityLevel || 'similar activity levels';\r\n            reasons.push({\r\n                icon: '⚡',\r\n                title: 'Activity Level Match',\r\n                detail: `Both ${level.toLowerCase()} - perfect for planning activities together`,\r\n                strength: 'medium'\r\n            });\r\n        }\r\n        \r\n        // Social energy compatibility\r\n        if (friend.socialPreferences?.socialEnergy && user.socialPreferences?.socialEnergy) {\r\n            if (friend.socialPreferences.socialEnergy === user.socialPreferences.socialEnergy) {\r\n                const energy = friend.socialPreferences.socialEnergy;\r\n                reasons.push({\r\n                    icon: '🌟',\r\n                    title: 'Social Energy Match',\r\n                    detail: `You're both ${energy.toLowerCase()}s - you'll understand each other's social needs`,\r\n                    strength: 'high'\r\n                });\r\n            }\r\n        }\r\n        \r\n        // Weekend plans alignment\r\n        if (factors.sharedWeekendPlans?.length > 0) {\r\n            const plans = factors.sharedWeekendPlans.join(', ');\r\n            reasons.push({\r\n                icon: '🎉',\r\n                title: 'Weekend Vibes Align',\r\n                detail: `You both love: ${plans}`,\r\n                strength: 'medium'\r\n            });\r\n        }\r\n        \r\n        // Shared values\r\n        if (factors.sharedValues?.length > 0) {\r\n            const values = factors.sharedValues.slice(0, 3).join(', ');\r\n            reasons.push({\r\n                icon: '💎',\r\n                title: 'Core Values Match',\r\n                detail: `You both value: ${values}`,\r\n                strength: 'high'\r\n            });\r\n        }\r\n        \r\n        // Personality compatibility\r\n        if (factors.personalityMatch && factors.personalityMatch > 0.6) {\r\n            const percentage = Math.round(factors.personalityMatch * 100);\r\n            reasons.push({\r\n                icon: '🧠',\r\n                title: 'Personality Compatibility',\r\n                detail: `${percentage}% personality alignment based on your traits and preferences`,\r\n                strength: 'medium'\r\n            });\r\n        }\r\n        \r\n        // Location proximity\r\n        if (factors.proximityScore > 0.7 && friend.location) {\r\n            reasons.push({\r\n                icon: '📍',\r\n                title: 'Location Convenient',\r\n                detail: `You're both in ${friend.location} - easy to meet up!`,\r\n                strength: 'medium'\r\n            });\r\n        }\r\n        \r\n        // Friendship type compatibility\r\n        if (friend.socialPreferences?.friendshipType?.length > 0 && user.socialPreferences?.friendshipType?.length > 0) {\r\n            const commonTypes = friend.socialPreferences.friendshipType.filter(type => \r\n                user.socialPreferences.friendshipType.includes(type)\r\n            );\r\n            if (commonTypes.length > 0) {\r\n                reasons.push({\r\n                    icon: '🤝',\r\n                    title: 'Friendship Style Match',\r\n                    detail: `You both seek: ${commonTypes.join(', ')}`,\r\n                    strength: 'high'\r\n                });\r\n            }\r\n        }\r\n        \r\n        // Schedule compatibility\r\n        if (friend.lifestyle?.schedule === user.lifestyle?.schedule) {\r\n            const schedule = friend.lifestyle.schedule;\r\n            reasons.push({\r\n                icon: '⏰',\r\n                title: 'Schedule Compatibility',\r\n                detail: `You're both ${schedule.toLowerCase()}s - easier to sync hangout times`,\r\n                strength: 'low'\r\n            });\r\n        }\r\n        \r\n        return reasons;\r\n    };\r\n\r\n    return (\r\n        <div className=\"swipe-discovery\">\r\n            <div className=\"swipe-header\">\r\n                <h2>Discover Friends</h2>\r\n                <div className=\"match-count\">\r\n                    {potentialFriends.length - currentIndex} people to discover\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card-container\">\r\n                <div className={`friend-card ${isAnimating ? 'animating' : ''}`} ref={cardRef => {\r\n                    if (cardRef) {\r\n                        cardRef.scrollTop = 0; // Reset scroll when card changes\r\n                        setImageOffset(0); // Reset parallax offset\r\n                    }\r\n                }}>\r\n                    <div \r\n                        className=\"card-image\"\r\n                        style={{\r\n                            backgroundImage: `url(${currentFriend.profilePicture || '/default-avatar.png'})`,\r\n                            transform: `translateY(${imageOffset}px)` // Parallax transform\r\n                        }}\r\n                    >\r\n                        <div className=\"match-score\">\r\n                            {currentFriend.matchScore}% match\r\n                        </div>\r\n                        \r\n                        {/* Tinder-style user info overlay */}\r\n                        <div className=\"card-image-info\">\r\n                            <h3>{currentFriend.username}</h3>\r\n                            <p className=\"match-reason\">\r\n                                {getQuickMatchSummary(currentFriend, currentFriend.matchFactors)}\r\n                            </p>\r\n                        </div>\r\n                        \r\n                        <button \r\n                            className=\"see-bio-btn\" \r\n                            onClick={(e) => {\r\n                                // Find the friend-card div (the scrollable container)\r\n                                const friendCard = e.target.closest('.friend-card');\r\n                                const cardImage = friendCard?.querySelector('.card-image');\r\n                                if (friendCard && cardImage) {\r\n                                    // Get the actual height of the image container\r\n                                    const imageHeight = cardImage.offsetHeight;\r\n                                    // Scroll the entire card down by the image height minus some offset\r\n                                    // This creates a smooth parallax effect\r\n                                    friendCard.scrollTo({ \r\n                                        top: imageHeight - 80, \r\n                                        behavior: 'smooth' \r\n                                    });\r\n                                }\r\n                            }}\r\n                        >\r\n                            See Full Profile ↓\r\n                        </button>\r\n                    </div>\r\n                    \r\n                    <div className={`card-content ${expandedBio ? 'expanded' : ''}`}>\r\n                        <div className=\"card-header\">\r\n                            <div>\r\n                                <h3>{currentFriend.username}</h3>\r\n                                <span className=\"location\">\r\n                                    📍 {currentFriend.location || 'Location not set'}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className={`bio ${expandedBio ? 'expanded' : ''}`}>\r\n                            <strong>About:</strong>\r\n                            <p>{currentFriend.bio || 'No bio available'}</p>\r\n                        </div>\r\n                        \r\n                        <div className=\"interests\">\r\n                            <strong>Interests:</strong>\r\n                            <div className=\"interest-tags\">\r\n                                {currentFriend.interests?.map((interest, index) => (\r\n                                    <span key={index} className=\"interest-tag\">\r\n                                        {interest}\r\n                                    </span>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"match-factors\">\r\n                            <div className=\"match-factors-header\" onClick={() => setShowConnectionDetails(!showConnectionDetails)}>\r\n                                <h4>🌟 Why you might connect</h4>\r\n                                <span className=\"expand-icon\">{showConnectionDetails ? '▼' : '▶'}</span>\r\n                            </div>\r\n                            \r\n                            {!showConnectionDetails ? (\r\n                                <div className=\"match-factors-summary\">\r\n                                    {getDetailedConnectionReasons(currentFriend, currentFriend.matchFactors)\r\n                                        .slice(0, 2)\r\n                                        .map((reason, index) => (\r\n                                            <div key={index} className=\"reason-summary\">\r\n                                                <span className=\"reason-icon\">{reason.icon}</span>\r\n                                                <span className=\"reason-title\">{reason.title}</span>\r\n                                            </div>\r\n                                        ))}\r\n                                    <button className=\"show-more-btn\" onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        setShowConnectionDetails(true);\r\n                                    }}>\r\n                                        Show all reasons\r\n                                    </button>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"match-factors-detailed\">\r\n                                    {getDetailedConnectionReasons(currentFriend, currentFriend.matchFactors).map((reason, index) => (\r\n                                        <div key={index} className={`reason-card strength-${reason.strength}`}>\r\n                                            <div className=\"reason-header\">\r\n                                                <span className=\"reason-icon\">{reason.icon}</span>\r\n                                                <span className=\"reason-title\">{reason.title}</span>\r\n                                            </div>\r\n                                            <p className=\"reason-detail\">{reason.detail}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"swipe-actions\">\r\n                <button \r\n                    className=\"swipe-btn pass\"\r\n                    onClick={() => handleSwipe('pass', currentFriend)}\r\n                    disabled={isAnimating}\r\n                >\r\n                    <span className=\"btn-icon\">✕</span>\r\n                    Pass\r\n                </button>\r\n                \r\n                <button \r\n                    className=\"swipe-btn like\"\r\n                    onClick={() => handleSwipe('like', currentFriend)}\r\n                    disabled={isAnimating}\r\n                >\r\n                    <span className=\"btn-icon\">💙</span>\r\n                    Connect\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"swipe-instructions\">\r\n                <p>💡 Swipe or click to make choices. We'll learn your preferences to find better matches!</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SwipeDiscovery;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9B,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,qBAAA;EACzB,MAAM;IAAEC;EAAK,CAAC,GAAGP,OAAO,CAAC,CAAC;EAC1B,MAAM,CAACQ,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGd,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACuB,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EACzE,MAAM,CAACyB,WAAW,EAAEC,cAAc,CAAC,GAAG1B,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM2B,OAAO,GAAG5B,KAAK,CAAC6B,MAAM,CAAC,IAAI,CAAC;EAElC3B,SAAS,CAAC,MAAM;IACZ4B,qBAAqB,CAAC,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,gBAAgB,GAAG5B,WAAW,CAAE6B,CAAC,IAAK;IACxC,MAAMC,SAAS,GAAGD,CAAC,CAACE,MAAM,CAACD,SAAS;IACpC;IACA,MAAME,MAAM,GAAGF,SAAS,GAAG,GAAG;IAC9BN,cAAc,CAACQ,MAAM,CAAC;EAC1B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAML,qBAAqB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI;MACAb,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMmB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMC,QAAQ,GAAG,MAAMlC,KAAK,CAACmC,GAAG,CAAC,sDAAsD,EAAE;QACrFC,OAAO,EAAE;UACL,eAAe,EAAE,UAAUL,KAAK;QACpC;MACJ,CAAC,CAAC;MACFvB,mBAAmB,CAAC0B,QAAQ,CAACG,IAAI,CAAC;IACtC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IAC7D,CAAC,SAAS;MACN1B,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAM4B,WAAW,GAAG1C,WAAW,CAAC,OAAO2C,SAAS,EAAEC,MAAM,KAAK;IACzD,IAAI3B,WAAW,EAAE;IAEjBC,cAAc,CAAC,IAAI,CAAC;;IAEpB;IACA,MAAM2B,SAAS,GAAG;MACdC,YAAY,EAAEF,MAAM,CAACG,GAAG;MACxBC,MAAM,EAAEL,SAAS;MAAE;MACnBM,UAAU,EAAEL,MAAM,CAACK,UAAU;MAC7BC,YAAY,EAAEN,MAAM,CAACM,YAAY;MACjCC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IACtC,CAAC;IAEDrC,eAAe,CAACsC,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAET,SAAS,CAAC,CAAC;IAE7C,IAAI;MACA;MACA,MAAMZ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMjC,KAAK,CAACqD,IAAI,CAAC,iDAAiD,EAAEV,SAAS,EAAE;QAC3EP,OAAO,EAAE;UACL,eAAe,EAAE,UAAUL,KAAK;QACpC;MACJ,CAAC,CAAC;;MAEF;MACA,IAAIU,SAAS,KAAK,MAAM,EAAE;QACtB,MAAMzC,KAAK,CAACqD,IAAI,CAAC,mDAAmD,EAAE;UAClEC,QAAQ,EAAEZ,MAAM,CAACG;QACrB,CAAC,EAAE;UACCT,OAAO,EAAE;YACL,eAAe,EAAE,UAAUL,KAAK;UACpC;QACJ,CAAC,CAAC;MACN;IACJ,CAAC,CAAC,OAAOO,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAClD;;IAEA;IACAiB,UAAU,CAAC,MAAM;MACb7C,eAAe,CAAC0C,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;MACjCpC,cAAc,CAAC,KAAK,CAAC;MACrB;MACAE,cAAc,CAAC,KAAK,CAAC;MACrBE,wBAAwB,CAAC,KAAK,CAAC;MAC/BE,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;MACnB;MACA,IAAIC,OAAO,CAACiC,OAAO,EAAE;QACjBjC,OAAO,CAACiC,OAAO,CAAC5B,SAAS,GAAG,CAAC;MACjC;IACJ,CAAC,EAAE,GAAG,CAAC;EACX,CAAC,EAAE,CAACb,WAAW,CAAC,CAAC;EAEjB,MAAM0C,aAAa,GAAGlD,gBAAgB,CAACE,YAAY,CAAC;EAEpD,IAAIE,OAAO,EAAE;IACT,oBACIT,OAAA;MAAKwD,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC5BzD,OAAA;QAAKwD,SAAS,EAAC,mBAAmB;QAAAC,QAAA,gBAC9BzD,OAAA;UAAKwD,SAAS,EAAC;QAAiB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACvC7D,OAAA;UAAAyD,QAAA,EAAG;QAAiC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEd;EAEA,IAAI,CAACN,aAAa,EAAE;IAChB,oBACIvD,OAAA;MAAKwD,SAAS,EAAC,iBAAiB;MAAAC,QAAA,eAC5BzD,OAAA;QAAKwD,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC1BzD,OAAA;UAAAyD,QAAA,EAAI;QAAwB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjC7D,OAAA;UAAAyD,QAAA,EAAG;QAAuE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAC9E7D,OAAA;UAAQ8D,OAAO,EAAEvC,qBAAsB;UAACiC,SAAS,EAAC,aAAa;UAAAC,QAAA,EAAC;QAEhE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEd;;EAEA;EACA,MAAME,oBAAoB,GAAGA,CAACvB,MAAM,EAAEwB,OAAO,KAAK;IAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,qBAAA;IAC9C,IAAI,CAACL,OAAO,IAAI,CAACxB,MAAM,EAAE,OAAO,wBAAwB;IAExD,MAAM8B,SAAS,GAAG,EAAE;;IAEpB;IACA,IAAI,EAAAL,qBAAA,GAAAD,OAAO,CAACO,eAAe,cAAAN,qBAAA,uBAAvBA,qBAAA,CAAyBO,MAAM,KAAI,CAAC,EAAE;MACtCF,SAAS,CAACG,IAAI,CAAC,GAAGT,OAAO,CAACO,eAAe,CAACC,MAAM,mBAAmB,CAAC;IACxE,CAAC,MAAM,IAAI,EAAAN,sBAAA,GAAAF,OAAO,CAACO,eAAe,cAAAL,sBAAA,uBAAvBA,sBAAA,CAAyBM,MAAM,IAAG,CAAC,EAAE;MAC5CF,SAAS,CAACG,IAAI,CAAC,SAAST,OAAO,CAACO,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC;IACzD;;IAEA;IACA,IAAIP,OAAO,CAACU,kBAAkB,KAAAP,qBAAA,GAAI3B,MAAM,CAACmC,iBAAiB,cAAAR,qBAAA,eAAxBA,qBAAA,CAA0BS,kBAAkB,EAAE;MAC5EN,SAAS,CAACG,IAAI,CAAC,6BAA6B,CAAC;IACjD;;IAEA;IACA,IAAI,CAAAL,sBAAA,GAAA5B,MAAM,CAACmC,iBAAiB,cAAAP,sBAAA,eAAxBA,sBAAA,CAA0BS,YAAY,KAAAR,qBAAA,GAAIjE,IAAI,CAACuE,iBAAiB,cAAAN,qBAAA,eAAtBA,qBAAA,CAAwBQ,YAAY,EAAE;MAChF,IAAIrC,MAAM,CAACmC,iBAAiB,CAACE,YAAY,KAAKzE,IAAI,CAACuE,iBAAiB,CAACE,YAAY,EAAE;QAC/EP,SAAS,CAACG,IAAI,CAAC,QAAQjC,MAAM,CAACmC,iBAAiB,CAACE,YAAY,CAACC,WAAW,CAAC,CAAC,GAAG,CAAC;MAClF;IACJ;;IAEA;IACA,IAAId,OAAO,CAACe,cAAc,GAAG,GAAG,IAAIvC,MAAM,CAACwC,QAAQ,EAAE;MACjDV,SAAS,CAACG,IAAI,CAAC,YAAYjC,MAAM,CAACwC,QAAQ,EAAE,CAAC;IACjD;;IAEA;IACA,IAAIV,SAAS,CAACE,MAAM,KAAK,CAAC,EAAE;MACxB,OAAO,gCAAgC;IAC3C;IAEA,OAAOF,SAAS,CAACW,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC;EAC5C,CAAC;EAED,MAAMC,4BAA4B,GAAGA,CAAC3C,MAAM,EAAEwB,OAAO,KAAK;IAAA,IAAAoB,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,kBAAA,EAAAC,eAAA;IACtD,IAAI,CAAC9B,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;MACzC,OAAO,EAAE;IACb;IAEA,MAAM+B,OAAO,GAAG,EAAE;;IAElB;IACA,IAAI,EAAAX,sBAAA,GAAApB,OAAO,CAACO,eAAe,cAAAa,sBAAA,uBAAvBA,sBAAA,CAAyBZ,MAAM,IAAG,CAAC,EAAE;MACrC,MAAMwB,YAAY,GAAGhC,OAAO,CAACO,eAAe,CAACU,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;MACnE,MAAMe,SAAS,GAAGjC,OAAO,CAACO,eAAe,CAACC,MAAM,GAAG,CAAC,GAAG,QAAQR,OAAO,CAACO,eAAe,CAACC,MAAM,GAAG,CAAC,OAAO,GAAG,EAAE;MAC7GuB,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,kBAAkB;QACzBC,MAAM,EAAE,mBAAmBJ,YAAY,GAAGC,SAAS,EAAE;QACrDI,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAIrC,OAAO,CAACU,kBAAkB,EAAE;MAAA,IAAA4B,sBAAA;MAC5B,MAAMC,KAAK,GAAG,EAAAD,sBAAA,GAAA9D,MAAM,CAACmC,iBAAiB,cAAA2B,sBAAA,uBAAxBA,sBAAA,CAA0B1B,kBAAkB,KAAI,cAAc;MAC5EmB,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,6BAA6B;QACpCC,MAAM,EAAE,mBAAmBG,KAAK,CAACzB,WAAW,CAAC,CAAC,wCAAwC;QACtFuB,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAIrC,OAAO,CAACwC,kBAAkB,EAAE;MAAA,IAAAC,iBAAA;MAC5B,MAAMC,KAAK,GAAG,EAAAD,iBAAA,GAAAjE,MAAM,CAACmE,SAAS,cAAAF,iBAAA,uBAAhBA,iBAAA,CAAkBG,aAAa,KAAI,yBAAyB;MAC1Eb,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,GAAG;QACTC,KAAK,EAAE,sBAAsB;QAC7BC,MAAM,EAAE,QAAQM,KAAK,CAAC5B,WAAW,CAAC,CAAC,6CAA6C;QAChFuB,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAI,CAAAhB,sBAAA,GAAA7C,MAAM,CAACmC,iBAAiB,cAAAU,sBAAA,eAAxBA,sBAAA,CAA0BR,YAAY,KAAAS,sBAAA,GAAIlF,IAAI,CAACuE,iBAAiB,cAAAW,sBAAA,eAAtBA,sBAAA,CAAwBT,YAAY,EAAE;MAChF,IAAIrC,MAAM,CAACmC,iBAAiB,CAACE,YAAY,KAAKzE,IAAI,CAACuE,iBAAiB,CAACE,YAAY,EAAE;QAC/E,MAAMgC,MAAM,GAAGrE,MAAM,CAACmC,iBAAiB,CAACE,YAAY;QACpDkB,OAAO,CAACtB,IAAI,CAAC;UACTyB,IAAI,EAAE,IAAI;UACVC,KAAK,EAAE,qBAAqB;UAC5BC,MAAM,EAAE,eAAeS,MAAM,CAAC/B,WAAW,CAAC,CAAC,iDAAiD;UAC5FuB,QAAQ,EAAE;QACd,CAAC,CAAC;MACN;IACJ;;IAEA;IACA,IAAI,EAAAd,qBAAA,GAAAvB,OAAO,CAAC8C,kBAAkB,cAAAvB,qBAAA,uBAA1BA,qBAAA,CAA4Bf,MAAM,IAAG,CAAC,EAAE;MACxC,MAAMuC,KAAK,GAAG/C,OAAO,CAAC8C,kBAAkB,CAAC5B,IAAI,CAAC,IAAI,CAAC;MACnDa,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,qBAAqB;QAC5BC,MAAM,EAAE,kBAAkBW,KAAK,EAAE;QACjCV,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAI,EAAAb,qBAAA,GAAAxB,OAAO,CAACgD,YAAY,cAAAxB,qBAAA,uBAApBA,qBAAA,CAAsBhB,MAAM,IAAG,CAAC,EAAE;MAClC,MAAMyC,MAAM,GAAGjD,OAAO,CAACgD,YAAY,CAAC/B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;MAC1Da,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,mBAAmB;QAC1BC,MAAM,EAAE,mBAAmBa,MAAM,EAAE;QACnCZ,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAIrC,OAAO,CAACkD,gBAAgB,IAAIlD,OAAO,CAACkD,gBAAgB,GAAG,GAAG,EAAE;MAC5D,MAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACrD,OAAO,CAACkD,gBAAgB,GAAG,GAAG,CAAC;MAC7DnB,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,2BAA2B;QAClCC,MAAM,EAAE,GAAGe,UAAU,8DAA8D;QACnFd,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAIrC,OAAO,CAACe,cAAc,GAAG,GAAG,IAAIvC,MAAM,CAACwC,QAAQ,EAAE;MACjDe,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,qBAAqB;QAC5BC,MAAM,EAAE,kBAAkB5D,MAAM,CAACwC,QAAQ,qBAAqB;QAC9DqB,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;;IAEA;IACA,IAAI,EAAAZ,sBAAA,GAAAjD,MAAM,CAACmC,iBAAiB,cAAAc,sBAAA,wBAAAC,sBAAA,GAAxBD,sBAAA,CAA0B6B,cAAc,cAAA5B,sBAAA,uBAAxCA,sBAAA,CAA0ClB,MAAM,IAAG,CAAC,IAAI,EAAAmB,sBAAA,GAAAvF,IAAI,CAACuE,iBAAiB,cAAAgB,sBAAA,wBAAAC,sBAAA,GAAtBD,sBAAA,CAAwB2B,cAAc,cAAA1B,sBAAA,uBAAtCA,sBAAA,CAAwCpB,MAAM,IAAG,CAAC,EAAE;MAC5G,MAAM+C,WAAW,GAAG/E,MAAM,CAACmC,iBAAiB,CAAC2C,cAAc,CAACE,MAAM,CAACC,IAAI,IACnErH,IAAI,CAACuE,iBAAiB,CAAC2C,cAAc,CAACI,QAAQ,CAACD,IAAI,CACvD,CAAC;MACD,IAAIF,WAAW,CAAC/C,MAAM,GAAG,CAAC,EAAE;QACxBuB,OAAO,CAACtB,IAAI,CAAC;UACTyB,IAAI,EAAE,IAAI;UACVC,KAAK,EAAE,wBAAwB;UAC/BC,MAAM,EAAE,kBAAkBmB,WAAW,CAACrC,IAAI,CAAC,IAAI,CAAC,EAAE;UAClDmB,QAAQ,EAAE;QACd,CAAC,CAAC;MACN;IACJ;;IAEA;IACA,IAAI,EAAAR,kBAAA,GAAArD,MAAM,CAACmE,SAAS,cAAAd,kBAAA,uBAAhBA,kBAAA,CAAkB8B,QAAQ,QAAA7B,eAAA,GAAK1F,IAAI,CAACuG,SAAS,cAAAb,eAAA,uBAAdA,eAAA,CAAgB6B,QAAQ,GAAE;MACzD,MAAMA,QAAQ,GAAGnF,MAAM,CAACmE,SAAS,CAACgB,QAAQ;MAC1C5B,OAAO,CAACtB,IAAI,CAAC;QACTyB,IAAI,EAAE,GAAG;QACTC,KAAK,EAAE,wBAAwB;QAC/BC,MAAM,EAAE,eAAeuB,QAAQ,CAAC7C,WAAW,CAAC,CAAC,kCAAkC;QAC/EuB,QAAQ,EAAE;MACd,CAAC,CAAC;IACN;IAEA,OAAON,OAAO;EAClB,CAAC;EAED,oBACI/F,OAAA;IAAKwD,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAC5BzD,OAAA;MAAKwD,SAAS,EAAC,cAAc;MAAAC,QAAA,gBACzBzD,OAAA;QAAAyD,QAAA,EAAI;MAAgB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACzB7D,OAAA;QAAKwD,SAAS,EAAC,aAAa;QAAAC,QAAA,GACvBpD,gBAAgB,CAACmE,MAAM,GAAGjE,YAAY,EAAC,qBAC5C;MAAA;QAAAmD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAEN7D,OAAA;MAAKwD,SAAS,EAAC,gBAAgB;MAAAC,QAAA,eAC3BzD,OAAA;QAAKwD,SAAS,EAAE,eAAe3C,WAAW,GAAG,WAAW,GAAG,EAAE,EAAG;QAAC+G,GAAG,EAAEvG,OAAO,IAAI;UAC7E,IAAIA,OAAO,EAAE;YACTA,OAAO,CAACK,SAAS,GAAG,CAAC,CAAC,CAAC;YACvBN,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;UACvB;QACJ,CAAE;QAAAqC,QAAA,gBACEzD,OAAA;UACIwD,SAAS,EAAC,YAAY;UACtB+C,KAAK,EAAE;YACHsB,eAAe,EAAE,OAAOtE,aAAa,CAACuE,cAAc,IAAI,qBAAqB,GAAG;YAChFC,SAAS,EAAE,cAAc5G,WAAW,KAAK,CAAC;UAC9C,CAAE;UAAAsC,QAAA,gBAEFzD,OAAA;YAAKwD,SAAS,EAAC,aAAa;YAAAC,QAAA,GACvBF,aAAa,CAACV,UAAU,EAAC,SAC9B;UAAA;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAGN7D,OAAA;YAAKwD,SAAS,EAAC,iBAAiB;YAAAC,QAAA,gBAC5BzD,OAAA;cAAAyD,QAAA,EAAKF,aAAa,CAACyE;YAAQ;cAAAtE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACjC7D,OAAA;cAAGwD,SAAS,EAAC,cAAc;cAAAC,QAAA,EACtBM,oBAAoB,CAACR,aAAa,EAAEA,aAAa,CAACT,YAAY;YAAC;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAEN7D,OAAA;YACIwD,SAAS,EAAC,aAAa;YACvBM,OAAO,EAAGrC,CAAC,IAAK;cACZ;cACA,MAAMwG,UAAU,GAAGxG,CAAC,CAACE,MAAM,CAACuG,OAAO,CAAC,cAAc,CAAC;cACnD,MAAMC,SAAS,GAAGF,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEG,aAAa,CAAC,aAAa,CAAC;cAC1D,IAAIH,UAAU,IAAIE,SAAS,EAAE;gBACzB;gBACA,MAAME,WAAW,GAAGF,SAAS,CAACG,YAAY;gBAC1C;gBACA;gBACAL,UAAU,CAACM,QAAQ,CAAC;kBAChBC,GAAG,EAAEH,WAAW,GAAG,EAAE;kBACrBI,QAAQ,EAAE;gBACd,CAAC,CAAC;cACN;YACJ,CAAE;YAAAhF,QAAA,EACL;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eAEN7D,OAAA;UAAKwD,SAAS,EAAE,gBAAgBzC,WAAW,GAAG,UAAU,GAAG,EAAE,EAAG;UAAA0C,QAAA,gBAC5DzD,OAAA;YAAKwD,SAAS,EAAC,aAAa;YAAAC,QAAA,eACxBzD,OAAA;cAAAyD,QAAA,gBACIzD,OAAA;gBAAAyD,QAAA,EAAKF,aAAa,CAACyE;cAAQ;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjC7D,OAAA;gBAAMwD,SAAS,EAAC,UAAU;gBAAAC,QAAA,GAAC,eACpB,EAACF,aAAa,CAACyB,QAAQ,IAAI,kBAAkB;cAAA;gBAAAtB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC9C,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eAEN7D,OAAA;YAAKwD,SAAS,EAAE,OAAOzC,WAAW,GAAG,UAAU,GAAG,EAAE,EAAG;YAAA0C,QAAA,gBACnDzD,OAAA;cAAAyD,QAAA,EAAQ;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACvB7D,OAAA;cAAAyD,QAAA,EAAIF,aAAa,CAACmF,GAAG,IAAI;YAAkB;cAAAhF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/C,CAAC,eAEN7D,OAAA;YAAKwD,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACtBzD,OAAA;cAAAyD,QAAA,EAAQ;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC3B7D,OAAA;cAAKwD,SAAS,EAAC,eAAe;cAAAC,QAAA,GAAAtD,qBAAA,GACzBoD,aAAa,CAACoF,SAAS,cAAAxI,qBAAA,uBAAvBA,qBAAA,CAAyByI,GAAG,CAAC,CAACC,QAAQ,EAAEC,KAAK,kBAC1C9I,OAAA;gBAAkBwD,SAAS,EAAC,cAAc;gBAAAC,QAAA,EACrCoF;cAAQ,GADFC,KAAK;gBAAApF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEV,CACT;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eAEN7D,OAAA;YAAKwD,SAAS,EAAC,eAAe;YAAAC,QAAA,gBAC1BzD,OAAA;cAAKwD,SAAS,EAAC,sBAAsB;cAACM,OAAO,EAAEA,CAAA,KAAM5C,wBAAwB,CAAC,CAACD,qBAAqB,CAAE;cAAAwC,QAAA,gBAClGzD,OAAA;gBAAAyD,QAAA,EAAI;cAAwB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACjC7D,OAAA;gBAAMwD,SAAS,EAAC,aAAa;gBAAAC,QAAA,EAAExC,qBAAqB,GAAG,GAAG,GAAG;cAAG;gBAAAyC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvE,CAAC,EAEL,CAAC5C,qBAAqB,gBACnBjB,OAAA;cAAKwD,SAAS,EAAC,uBAAuB;cAAAC,QAAA,GACjC0B,4BAA4B,CAAC5B,aAAa,EAAEA,aAAa,CAACT,YAAY,CAAC,CACnEmC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CACX2D,GAAG,CAAC,CAACG,MAAM,EAAED,KAAK,kBACf9I,OAAA;gBAAiBwD,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,gBACvCzD,OAAA;kBAAMwD,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAEsF,MAAM,CAAC7C;gBAAI;kBAAAxC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAClD7D,OAAA;kBAAMwD,SAAS,EAAC,cAAc;kBAAAC,QAAA,EAAEsF,MAAM,CAAC5C;gBAAK;kBAAAzC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA,GAF9CiF,KAAK;gBAAApF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAGV,CACR,CAAC,eACN7D,OAAA;gBAAQwD,SAAS,EAAC,eAAe;gBAACM,OAAO,EAAGrC,CAAC,IAAK;kBAC9CA,CAAC,CAACuH,eAAe,CAAC,CAAC;kBACnB9H,wBAAwB,CAAC,IAAI,CAAC;gBAClC,CAAE;gBAAAuC,QAAA,EAAC;cAEH;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC,gBAEN7D,OAAA;cAAKwD,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAClC0B,4BAA4B,CAAC5B,aAAa,EAAEA,aAAa,CAACT,YAAY,CAAC,CAAC8F,GAAG,CAAC,CAACG,MAAM,EAAED,KAAK,kBACvF9I,OAAA;gBAAiBwD,SAAS,EAAE,wBAAwBuF,MAAM,CAAC1C,QAAQ,EAAG;gBAAA5C,QAAA,gBAClEzD,OAAA;kBAAKwD,SAAS,EAAC,eAAe;kBAAAC,QAAA,gBAC1BzD,OAAA;oBAAMwD,SAAS,EAAC,aAAa;oBAAAC,QAAA,EAAEsF,MAAM,CAAC7C;kBAAI;oBAAAxC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAClD7D,OAAA;oBAAMwD,SAAS,EAAC,cAAc;oBAAAC,QAAA,EAAEsF,MAAM,CAAC5C;kBAAK;oBAAAzC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnD,CAAC,eACN7D,OAAA;kBAAGwD,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAEsF,MAAM,CAAC3C;gBAAM;kBAAA1C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA,GAL1CiF,KAAK;gBAAApF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAMV,CACR;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CACR;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAEN7D,OAAA;MAAKwD,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC1BzD,OAAA;QACIwD,SAAS,EAAC,gBAAgB;QAC1BM,OAAO,EAAEA,CAAA,KAAMxB,WAAW,CAAC,MAAM,EAAEiB,aAAa,CAAE;QAClD0F,QAAQ,EAAEpI,WAAY;QAAA4C,QAAA,gBAEtBzD,OAAA;UAAMwD,SAAS,EAAC,UAAU;UAAAC,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,QAEvC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAET7D,OAAA;QACIwD,SAAS,EAAC,gBAAgB;QAC1BM,OAAO,EAAEA,CAAA,KAAMxB,WAAW,CAAC,MAAM,EAAEiB,aAAa,CAAE;QAClD0F,QAAQ,EAAEpI,WAAY;QAAA4C,QAAA,gBAEtBzD,OAAA;UAAMwD,SAAS,EAAC,UAAU;UAAAC,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,WAExC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,eAEN7D,OAAA;MAAKwD,SAAS,EAAC,oBAAoB;MAAAC,QAAA,eAC/BzD,OAAA;QAAAyD,QAAA,EAAG;MAAuF;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7F,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAAC3D,EAAA,CAnbID,cAAc;EAAA,QACCJ,OAAO;AAAA;AAAAqJ,EAAA,GADtBjJ,cAAc;AAqbpB,eAAeA,cAAc;AAAC,IAAAiJ,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}