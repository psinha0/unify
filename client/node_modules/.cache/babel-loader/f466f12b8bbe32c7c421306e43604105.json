{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nconst useAuth = () => {\n  _s();\n  const {\n    user,\n    setUser\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await fetch('/api/auth/user');\n        const data = await response.json();\n        if (data.user) {\n          setUser(data.user);\n        }\n      } catch (error) {\n        console.error('Failed to fetch user:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUser();\n  }, [setUser]);\n  const login = async credentials => {\n    const response = await fetch('/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(credentials)\n    });\n    const data = await response.json();\n    if (data.user) {\n      setUser(data.user);\n    }\n    return data;\n  };\n  const logout = async () => {\n    await fetch('/api/auth/logout', {\n      method: 'POST'\n    });\n    setUser(null);\n  };\n  return {\n    user,\n    loading,\n    login,\n    logout\n  };\n};\n_s(useAuth, \"X2B6CFMKLMfS2JOE6/oqHGzpcZA=\");\nexport default useAuth;","map":{"version":3,"names":["useState","useEffect","useContext","AuthContext","useAuth","_s","user","setUser","loading","setLoading","fetchUser","response","fetch","data","json","error","console","login","credentials","method","headers","body","JSON","stringify","logout"],"sources":["C:/Users/sinha/Desktop/Computing Projects/INFS3059/friend-finder/client/src/hooks/useAuth.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\n\nconst useAuth = () => {\n    const { user, setUser } = useContext(AuthContext);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchUser = async () => {\n            try {\n                const response = await fetch('/api/auth/user');\n                const data = await response.json();\n                if (data.user) {\n                    setUser(data.user);\n                }\n            } catch (error) {\n                console.error('Failed to fetch user:', error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchUser();\n    }, [setUser]);\n\n    const login = async (credentials) => {\n        const response = await fetch('/api/auth/login', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(credentials),\n        });\n        const data = await response.json();\n        if (data.user) {\n            setUser(data.user);\n        }\n        return data;\n    };\n\n    const logout = async () => {\n        await fetch('/api/auth/logout', {\n            method: 'POST',\n        });\n        setUser(null);\n    };\n\n    return { user, loading, login, logout };\n};\n\nexport default useAuth;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AACvD,SAASC,WAAW,QAAQ,yBAAyB;AAErD,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGL,UAAU,CAACC,WAAW,CAAC;EACjD,MAAM,CAACK,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACZ,MAAMS,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,gBAAgB,CAAC;QAC9C,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAClC,IAAID,IAAI,CAACP,IAAI,EAAE;UACXC,OAAO,CAACM,IAAI,CAACP,IAAI,CAAC;QACtB;MACJ,CAAC,CAAC,OAAOS,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MACjD,CAAC,SAAS;QACNN,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IAEDC,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,CAACH,OAAO,CAAC,CAAC;EAEb,MAAMU,KAAK,GAAG,MAAOC,WAAW,IAAK;IACjC,MAAMP,QAAQ,GAAG,MAAMC,KAAK,CAAC,iBAAiB,EAAE;MAC5CO,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,WAAW;IACpC,CAAC,CAAC;IACF,MAAML,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAClC,IAAID,IAAI,CAACP,IAAI,EAAE;MACXC,OAAO,CAACM,IAAI,CAACP,IAAI,CAAC;IACtB;IACA,OAAOO,IAAI;EACf,CAAC;EAED,MAAMW,MAAM,GAAG,MAAAA,CAAA,KAAY;IACvB,MAAMZ,KAAK,CAAC,kBAAkB,EAAE;MAC5BO,MAAM,EAAE;IACZ,CAAC,CAAC;IACFZ,OAAO,CAAC,IAAI,CAAC;EACjB,CAAC;EAED,OAAO;IAAED,IAAI;IAAEE,OAAO;IAAES,KAAK;IAAEO;EAAO,CAAC;AAC3C,CAAC;AAACnB,EAAA,CA7CID,OAAO;AA+Cb,eAAeA,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}